CPPFLAGS= -I./include
CFLAGS=
LDFLAGS= -lc

PREFIX ?= arm-none-eabi-
# The gcc compiler bin path can be either defined in make command via GCC_PATH variable (> make GCC_PATH=xxx)
# either it can be added to the PATH environment variable.
ifdef GCC_PATH
CC = $(GCC_PATH)/$(PREFIX)gcc
AS = $(GCC_PATH)/$(PREFIX)gcc -x assembler-with-cpp
CP = $(GCC_PATH)/$(PREFIX)objcopy
SZ = $(GCC_PATH)/$(PREFIX)size
AR = $(GCC_PATH)/$(PREFIX)ar
else
CC = $(PREFIX)gcc
AS = $(PREFIX)gcc -x assembler-with-cpp
CP = $(PREFIX)objcopy
SZ = $(PREFIX)size
AR = $(PREFIX)ar
endif

SRC= \
	coverage.c 	\
	syscall.c

OBJ=$(SRC:.c=.o)

LIB=libgcov-9-baremetal.a

$(LIB): $(OBJ)
	$(AR) rcs $^ $@


.PHONY: clean
clean:
	$(RM) $(LIB)
	$(RM) $(OBJ)
